{"version":3,"sources":["allenFileUpload.js"],"names":[],"mappings":"AAAA,IAAI,SAAJ,CAAc,iBAAd,EAAiC,UAAS,YAAT,EAAuB;AACpD,WAAO;AACH,kBAAU,IADP;AAEH,kBAAS,UAAS,CAAT,EAAW,CAAX,EAAa;AACrB,gBAAI,SAAS,EAAE,MAAf;AACA,gBAAG,EAAE,IAAL,EAAU;AACT,uBAAO,2QAAP;AACA;AACD,mBAAO,0JAAP;AACA,SARE;AASH,eAAM;AACL,oBAAO,SADF;AAEL,sBAAS;AAFJ,SATH;AAaH,oBAAY,IAbT;AAcH,oBAAW,UAAS,MAAT,EAAgB,MAAhB,EAAuB,UAAvB,EAAkC;;AAE5C,gBAAI,WAAW,OAAO,QAAP,GAAkB,IAAI,YAAJ,CAAiB;AAC9C,qBAAK;AADyC,aAAjB,CAAjC;;AAIN,gBAAG,OAAO,SAAP,IAAoB,OAAvB,EAA+B;AAC9B,oBAAI,WAAW,OAAO,QAAP,GAAkB,IAAI,YAAJ,CAAiB;AACjD,yBAAK;AAD4C,iBAAjB,CAAjC;AAGA;AACK,qBAAS,aAAT,GAAyB,UAAS,QAAT,EAAmB,QAAnB,EAA6B,MAA7B,EAAqC,OAArC,EAA8C;AACtE,uBAAO,MAAP,GAAgB,SAAS,GAAzB;AACA,wBAAQ,IAAR,CAAa,SAAS,GAAtB;AACA,uBAAO,QAAP,CAAgB,EAAC,MAAK,SAAS,GAAf,EAAhB;AACH,aAJE;AAKN,qBAAS,iBAAT,GAA6B,UAAS,QAAT,EAAmB;AACzC,yBAAS,SAAT;AACH,aAFJ;AAGG,qBAAS,kBAAT,GAA8B,UAAS,IAAT,EAAe;;AAE5C,aAFD;AAGG,SApCE;AAqCH,iBAAQ,UAAS,OAAT,EAAkB,UAAlB,EAA6B;AACpC,mBAAO,UAAS,KAAT,EAAe,IAAf,EAAoB,IAApB,EAAyB,IAAzB,EAA8B;;;;;;;;;;;;AAYpC,aAZD;AAaA;AAnDE,KAAP;AAqDH,CAtDD","file":"allenFileUpload-compiled.js","sourcesContent":["app.directive('allenFileUpload', function(FileUploader) {\r\n    return {\r\n        restrict: 'AE',\r\n        template:function(o,a){\r\n        \tvar fmodel = a.fModel;\r\n        \tif(a.fImg){\r\n        \t\treturn '<img style=\"width:260px;height: 260px;\" class=\"recruit_img_lg m-r-sm\" ng-show=\"fModel\" ng-src=\"{{fModel}}\" ><input type=\"file\" ng-hide=\"true\"  nv-file-select=\"\" uploader=\"uploader\"  id=\"fileInput\" /><a class=\"btn btn-info\" onclick=\"$(\\'#fileInput\\').click()\">上传</a>';\r\n        \t}\r\n        \treturn '<input type=\"file\" ng-hide=\"true\"  nv-file-select=\"\" uploader=\"uploader\"  id=\"fileInput\" /><div onclick=\"$(\\'#fileInput\\').click()\" ng-transclude></div>';\r\n        },\r\n        scope:{\r\n        \tfModel:'=fModel',\r\n        \tcallBack:'&callBack'\r\n        },\r\n        transclude: true,\r\n        controller:function($scope,$attrs,$rootScope){\r\n    \t\t//console.info($attrs);\r\n        \tvar uploader = $scope.uploader = new FileUploader({\r\n    \t        url: '/server/fileService!upload'\r\n    \t    });\r\n\t\t\t//如果文件类型为EXCEl;\r\n\t\t\tif($attrs.file_type == 'EXCEL'){\r\n\t\t\t\tvar uploader = $scope.uploader = new FileUploader({\r\n\t\t\t\t\turl: '/server/excelFileService!parseExcel'\r\n\t\t\t\t});\r\n\t\t\t}\r\n        \tuploader.onSuccessItem = function(fileItem, response, status, headers) {\r\n\t\t        $scope.fModel = response.obj;\r\n\t\t        console.info(response.obj);\r\n\t\t        $scope.callBack({file:response.obj});\r\n\t\t    };\r\n\t\t\tuploader.onAfterAddingFile = function(fileItem) {\r\n\t\t        uploader.uploadAll();\r\n\t\t    };\r\n\t\t    uploader.onBeforeUploadItem = function(item) {\r\n\t\t    \t//$rootScope.rootRequest.show = true;\r\n\t\t    };\r\n        },\r\n        compile:function(element, attributes){\r\n        \treturn function(scope,elem,attr,ctrl){\r\n        \t\t\r\n        \t\t/*uploader.onSuccessItem = function(fileItem, response, status, headers) {\r\n        \t\t\talert('ahahah');\r\n        \t        console.info('onSuccessItem', fileItem, response, status, headers);\r\n        \t        //scope.file.uploadFilePath = response.obj;\r\n        \t    };\r\n        \t\tuploader.onAfterAddingFile = function(fileItem) {\r\n        \t\t\talert('ahahah1');\r\n        \t        console.info('onAfterAddingFile', fileItem);\r\n        \t        uploader.uploadAll();\r\n        \t    };*/\r\n        \t};\r\n        }\r\n    };\r\n});\r\n"]}