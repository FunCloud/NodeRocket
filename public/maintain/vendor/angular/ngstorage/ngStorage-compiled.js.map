{"version":3,"sources":["ngStorage.js"],"names":[],"mappings":"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","file":"ngStorage-compiled.js","sourcesContent":["'use strict';\n\n(function() {\n\n    /**\n     * @ngdoc overview\n     * @name ngStorage\n     */\n\n    angular.module('ngStorage', []).\n\n    /**\n     * @ngdoc object\n     * @name ngStorage.$localStorage\n     * @requires $rootScope\n     * @requires $window\n     */\n\n    factory('$localStorage', _storageFactory('localStorage')).\n\n    /**\n     * @ngdoc object\n     * @name ngStorage.$sessionStorage\n     * @requires $rootScope\n     * @requires $window\n     */\n\n    factory('$sessionStorage', _storageFactory('sessionStorage'));\n\n    function _storageFactory(storageType) {\n        return [\n            '$rootScope',\n            '$window',\n\n            function(\n                $rootScope,\n                $window\n            ){\n                // #9: Assign a placeholder object if Web Storage is unavailable to prevent breaking the entire AngularJS app\n                var webStorage = $window[storageType] || (console.warn('This browser does not support Web Storage!'), {}),\n                    $storage = {\n                        $default: function(items) {\n                            for (var k in items) {\n                                angular.isDefined($storage[k]) || ($storage[k] = items[k]);\n                            }\n\n                            return $storage;\n                        },\n                        $reset: function(items) {\n                            for (var k in $storage) {\n                                '$' === k[0] || delete $storage[k];\n                            }\n\n                            return $storage.$default(items);\n                        }\n                    },\n                    _last$storage,\n                    _debounce;\n\n                for (var i = 0, k; i < webStorage.length; i++) {\n                    // #8, #10: `webStorage.key(i)` may be an empty string (or throw an exception in IE9 if `webStorage` is empty)\n                    (k = webStorage.key(i)) && 'ngStorage-' === k.slice(0, 10) && ($storage[k.slice(10)] = angular.fromJson(webStorage.getItem(k)));\n                }\n\n                _last$storage = angular.copy($storage);\n\n                $rootScope.$watch(function() {\n                    _debounce || (_debounce = setTimeout(function() {\n                        _debounce = null;\n\n                        if (!angular.equals($storage, _last$storage)) {\n                            angular.forEach($storage, function(v, k) {\n                                angular.isDefined(v) && '$' !== k[0] && webStorage.setItem('ngStorage-' + k, angular.toJson(v));\n\n                                delete _last$storage[k];\n                            });\n\n                            for (var k in _last$storage) {\n                                webStorage.removeItem('ngStorage-' + k);\n                            }\n\n                            _last$storage = angular.copy($storage);\n                        }\n                    }, 100));\n                });\n\n                // #6: Use `$window.addEventListener` instead of `angular.element` to avoid the jQuery-specific `event.originalEvent`\n                'localStorage' === storageType && $window.addEventListener && $window.addEventListener('storage', function(event) {\n                    if ('ngStorage-' === event.key.slice(0, 10)) {\n                        event.newValue ? $storage[event.key.slice(10)] = angular.fromJson(event.newValue) : delete $storage[event.key.slice(10)];\n\n                        _last$storage = angular.copy($storage);\n\n                        $rootScope.$apply();\n                    }\n                });\n\n                return $storage;\n            }\n        ];\n    }\n\n})();\n"]}