{"version":3,"sources":["searchreplace.js"],"names":[],"mappings":"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","file":"searchreplace-compiled.js","sourcesContent":["/**\r\n * Created with JetBrains PhpStorm.\r\n * User: xuheng\r\n * Date: 12-9-26\r\n * Time: 下午12:29\r\n * To change this template use File | Settings | File Templates.\r\n */\r\n\r\n//清空上次查选的痕迹\r\neditor.firstForSR = 0;\r\neditor.currentRangeForSR = null;\r\n//给tab注册切换事件\r\n/**\r\n * tab点击处理事件\r\n * @param tabHeads\r\n * @param tabBodys\r\n * @param obj\r\n */\r\nfunction clickHandler( tabHeads,tabBodys,obj ) {\r\n    //head样式更改\r\n    for ( var k = 0, len = tabHeads.length; k < len; k++ ) {\r\n        tabHeads[k].className = \"\";\r\n    }\r\n    obj.className = \"focus\";\r\n    //body显隐\r\n    var tabSrc = obj.getAttribute( \"tabSrc\" );\r\n    for ( var j = 0, length = tabBodys.length; j < length; j++ ) {\r\n        var body = tabBodys[j],\r\n            id = body.getAttribute( \"id\" );\r\n        if ( id != tabSrc ) {\r\n            body.style.zIndex = 1;\r\n        } else {\r\n            body.style.zIndex = 200;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * TAB切换\r\n * @param tabParentId  tab的父节点ID或者对象本身\r\n */\r\nfunction switchTab( tabParentId ) {\r\n    var tabElements = $G( tabParentId ).children,\r\n        tabHeads = tabElements[0].children,\r\n        tabBodys = tabElements[1].children;\r\n\r\n    for ( var i = 0, length = tabHeads.length; i < length; i++ ) {\r\n        var head = tabHeads[i];\r\n        if ( head.className === \"focus\" )clickHandler(tabHeads,tabBodys, head );\r\n        head.onclick = function () {\r\n            clickHandler(tabHeads,tabBodys,this);\r\n        }\r\n    }\r\n}\r\n$G('searchtab').onmousedown = function(){\r\n    $G('search-msg').innerHTML = '';\r\n    $G('replace-msg').innerHTML = ''\r\n}\r\n//是否区分大小写\r\nfunction getMatchCase(id) {\r\n    return $G(id).checked ? true : false;\r\n}\r\n//查找\r\n$G(\"nextFindBtn\").onclick = function (txt, dir, mcase) {\r\n    var findtxt = $G(\"findtxt\").value, obj;\r\n    if (!findtxt) {\r\n        return false;\r\n    }\r\n    obj = {\r\n        searchStr:findtxt,\r\n        dir:1,\r\n        casesensitive:getMatchCase(\"matchCase\")\r\n    };\r\n    if (!frCommond(obj)) {\r\n        var bk = editor.selection.getRange().createBookmark();\r\n        $G('search-msg').innerHTML = lang.getEnd;\r\n        editor.selection.getRange().moveToBookmark(bk).select();\r\n\r\n\r\n    }\r\n};\r\n$G(\"nextReplaceBtn\").onclick = function (txt, dir, mcase) {\r\n    var findtxt = $G(\"findtxt1\").value, obj;\r\n    if (!findtxt) {\r\n        return false;\r\n    }\r\n    obj = {\r\n        searchStr:findtxt,\r\n        dir:1,\r\n        casesensitive:getMatchCase(\"matchCase1\")\r\n    };\r\n    frCommond(obj);\r\n};\r\n$G(\"preFindBtn\").onclick = function (txt, dir, mcase) {\r\n    var findtxt = $G(\"findtxt\").value, obj;\r\n    if (!findtxt) {\r\n        return false;\r\n    }\r\n    obj = {\r\n        searchStr:findtxt,\r\n        dir:-1,\r\n        casesensitive:getMatchCase(\"matchCase\")\r\n    };\r\n    if (!frCommond(obj)) {\r\n        $G('search-msg').innerHTML = lang.getStart;\r\n    }\r\n};\r\n$G(\"preReplaceBtn\").onclick = function (txt, dir, mcase) {\r\n    var findtxt = $G(\"findtxt1\").value, obj;\r\n    if (!findtxt) {\r\n        return false;\r\n    }\r\n    obj = {\r\n        searchStr:findtxt,\r\n        dir:-1,\r\n        casesensitive:getMatchCase(\"matchCase1\")\r\n    };\r\n    frCommond(obj);\r\n};\r\n//替换\r\n$G(\"repalceBtn\").onclick = function () {\r\n    var findtxt = $G(\"findtxt1\").value.replace(/^\\s|\\s$/g, \"\"), obj,\r\n        replacetxt = $G(\"replacetxt\").value.replace(/^\\s|\\s$/g, \"\");\r\n    if (!findtxt) {\r\n        return false;\r\n    }\r\n    if (findtxt == replacetxt || (!getMatchCase(\"matchCase1\") && findtxt.toLowerCase() == replacetxt.toLowerCase())) {\r\n        return false;\r\n    }\r\n    obj = {\r\n        searchStr:findtxt,\r\n        dir:1,\r\n        casesensitive:getMatchCase(\"matchCase1\"),\r\n        replaceStr:replacetxt\r\n    };\r\n    frCommond(obj);\r\n};\r\n//全部替换\r\n$G(\"repalceAllBtn\").onclick = function () {\r\n    var findtxt = $G(\"findtxt1\").value.replace(/^\\s|\\s$/g, \"\"), obj,\r\n        replacetxt = $G(\"replacetxt\").value.replace(/^\\s|\\s$/g, \"\");\r\n    if (!findtxt) {\r\n        return false;\r\n    }\r\n    if (findtxt == replacetxt || (!getMatchCase(\"matchCase1\") && findtxt.toLowerCase() == replacetxt.toLowerCase())) {\r\n        return false;\r\n    }\r\n    obj = {\r\n        searchStr:findtxt,\r\n        casesensitive:getMatchCase(\"matchCase1\"),\r\n        replaceStr:replacetxt,\r\n        all:true\r\n    };\r\n    var num = frCommond(obj);\r\n    if (num) {\r\n        $G('replace-msg').innerHTML = lang.countMsg.replace(\"{#count}\", num);\r\n    }\r\n};\r\n//执行\r\nvar frCommond = function (obj) {\r\n    return editor.execCommand(\"searchreplace\", obj);\r\n};\r\nswitchTab(\"searchtab\");"]}