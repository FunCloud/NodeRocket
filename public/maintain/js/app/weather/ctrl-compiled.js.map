{"version":3,"sources":["ctrl.js"],"names":[],"mappings":"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","file":"ctrl-compiled.js","sourcesContent":["app.controller(\"WeatherCtrl\", ['$scope', 'yahooApi', 'geoApi', function($scope, yahooApi, geoApi) {\r\n    $scope.userSearchText = '';\r\n    $scope.search = {};\r\n    $scope.forcast = {};\r\n    $scope.place = {};\r\n    $scope.data = {};\r\n\r\n    // get place\r\n    geoApi.then(function(res) {\r\n      $scope.userSearchText = res.data.city+\", \"+res.data.country_code;\r\n      $scope.getLocations();\r\n    });\r\n    \r\n    // get locations\r\n    $scope.getLocations = function () {\r\n      var query = 'select * from geo.places where text=\"' + $scope.userSearchText + '\"';\r\n      yahooApi.query({'q':query,'format':'json'}, {}, function (response) {\r\n        $scope.search = response;\r\n        if(response.query.count === 1 && !response.query.results.channel){\r\n          $scope.getWeather( response.query.results.place.woeid, response.query.results.place.name, response.query.results.place.country.content);\r\n        }\r\n      });\r\n    };\r\n\r\n    // get weather\r\n    $scope.getWeather = function(woeid, city, country){\r\n      $scope.place.city = city;\r\n      $scope.place.country = country;\r\n      var query = 'select item from weather.forecast where woeid=' + woeid;\r\n      yahooApi.query({'q':query,'format':'json'}, {}, function (response) {\r\n        response.query.results.channel.item.forecast.forEach(function(i, v) {\r\n          i.icon = $scope.getCustomIcon(i.code);\r\n        });\r\n        response.query.results.channel.item.condition.icon = $scope.getCustomIcon(response.query.results.channel.item.condition.code);\r\n        $scope.data = response;\r\n      });\r\n    };\r\n\r\n    $scope.getCustomIcon = function (condition) {\r\n      switch (condition) {\r\n        case \"0\":\r\n        case \"1\":\r\n        case \"2\":\r\n        case \"24\":\r\n        case \"25\":\r\n            return \"wind\";\r\n        case \"5\":\r\n        case \"6\":\r\n        case \"7\":        \r\n        case \"18\":        \r\n            return \"sleet\";\r\n        case \"3\":\r\n        case \"4\":\r\n        case \"8\":        \r\n        case \"9\":\r\n        case \"10\":\r\n        case \"11\":\r\n        case \"12\":\r\n        case \"35\":\r\n        case \"37\":\r\n        case \"38\":\r\n        case \"39\":        \r\n        case \"40\":\r\n        case \"45\":\r\n        case \"47\":\r\n            return \"rain\";\r\n        case \"13\":\r\n        case \"14\":\r\n        case \"15\":\r\n        case \"16\":\r\n        case \"17\":\r\n        case \"41\":\r\n        case \"42\":\r\n        case \"43\":\r\n        case \"46\":\r\n            return \"snow\";\r\n        case \"19\":\r\n        case \"20\":\r\n        case \"21\":\r\n        case \"22\":\r\n        case \"23\":\r\n            return \"fog\";        \r\n        case \"26\":\r\n        case \"27\":\r\n        case \"28\":\r\n        case \"44\":\r\n            return \"cloudy\";\r\n        case \"29\":\r\n            return \"partly-cloudy-night\";\r\n        case \"30\":\r\n            return \"partly-cloudy-day\";\r\n        case \"31\":\r\n        case \"33\":\r\n            return \"clear-night\";\r\n        case \"32\":\r\n        case \"34\":\r\n        case \"36\":\r\n            return \"clear-day\";\r\n        default:\r\n            return \"\";\r\n      }\r\n    }\r\n  }\r\n]);\r\n\r\napp.factory('yahooApi', ['$resource', function($resource) {\r\n  return $resource('http://query.yahooapis.com/v1/public/yql', {}, \r\n    {'query': \r\n      {\r\n        method: 'GET', \r\n        isArray: false\r\n      }\r\n    }\r\n  );\r\n}]);\r\n\r\napp.factory('geoApi', ['$http', function($http) {\r\n    return $http.jsonp(\"http://muslimsalat.com/daily.json?callback=JSON_CALLBACK\");\r\n  }\r\n]);\r\n\r\nfunction JSON_CALLBACK(){\r\n  // Nothing\r\n}"]}