{"version":3,"sources":["ui-map.js"],"names":[],"mappings":"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","file":"ui-map-compiled.js","sourcesContent":["'use strict';\r\n\r\n(function () {\r\n  //Setup map events from a google map object to trigger on a given element too,\r\n  //then we just use ui-event to catch events from an element\r\n  function bindMapEvents(scope, eventsStr, googleObject, element) {\r\n    angular.forEach(eventsStr.split(' '), function (eventName) {\r\n      //Prefix all googlemap events with 'map-', so eg 'click'\r\n      //for the googlemap doesn't interfere with a normal 'click' event\r\n      window.google.maps.event.addListener(googleObject, eventName, function (event) {\r\n        element.triggerHandler('map-' + eventName, event);\r\n        //We create an $apply if it isn't happening. we need better support for this\r\n        //We don't want to use timeout because tons of these events fire at once,\r\n        //and we only need one $apply\r\n        if (!scope.$$phase){ scope.$apply();}\r\n      });\r\n    });\r\n  }\r\n\r\n  app.value('uiMapConfig', {});\r\n  app.directive('uiMap',\r\n    ['uiMapConfig', '$parse', function (uiMapConfig, $parse) {\r\n\r\n      var mapEvents = 'bounds_changed center_changed click dblclick drag dragend ' +\r\n        'dragstart heading_changed idle maptypeid_changed mousemove mouseout ' +\r\n        'mouseover projection_changed resize rightclick tilesloaded tilt_changed ' +\r\n        'zoom_changed';\r\n      var options = uiMapConfig || {};\r\n\r\n      return {\r\n        restrict: 'A',\r\n        //doesn't work as E for unknown reason\r\n        link: function (scope, elm, attrs) {\r\n          var opts = angular.extend({}, options, scope.$eval(attrs.uiOptions));\r\n          var map = new window.google.maps.Map(elm[0], opts);\r\n          var model = $parse(attrs.uiMap);\r\n\r\n          //Set scope variable for the map\r\n          model.assign(scope, map);\r\n\r\n          bindMapEvents(scope, mapEvents, map, elm);\r\n        }\r\n      };\r\n    }]);\r\n\r\n  app.value('uiMapInfoWindowConfig', {});\r\n  app.directive('uiMapInfoWindow',\r\n    ['uiMapInfoWindowConfig', '$parse', '$compile', function (uiMapInfoWindowConfig, $parse, $compile) {\r\n\r\n      var infoWindowEvents = 'closeclick content_change domready ' +\r\n        'position_changed zindex_changed';\r\n      var options = uiMapInfoWindowConfig || {};\r\n\r\n      return {\r\n        link: function (scope, elm, attrs) {\r\n          var opts = angular.extend({}, options, scope.$eval(attrs.uiOptions));\r\n          opts.content = elm[0];\r\n          var model = $parse(attrs.uiMapInfoWindow);\r\n          var infoWindow = model(scope);\r\n\r\n          if (!infoWindow) {\r\n            infoWindow = new window.google.maps.InfoWindow(opts);\r\n            model.assign(scope, infoWindow);\r\n          }\r\n\r\n          bindMapEvents(scope, infoWindowEvents, infoWindow, elm);\r\n\r\n          /* The info window's contents dont' need to be on the dom anymore,\r\n           google maps has them stored.  So we just replace the infowindow element\r\n           with an empty div. (we don't just straight remove it from the dom because\r\n           straight removing things from the dom can mess up angular) */\r\n          elm.replaceWith('<div></div>');\r\n\r\n          //Decorate infoWindow.open to $compile contents before opening\r\n          var _open = infoWindow.open;\r\n          infoWindow.open = function open(a1, a2, a3, a4, a5, a6) {\r\n            $compile(elm.contents())(scope);\r\n            _open.call(infoWindow, a1, a2, a3, a4, a5, a6);\r\n          };\r\n        }\r\n      };\r\n    }]);\r\n\r\n  /*\r\n   * Map overlay directives all work the same. Take map marker for example\r\n   * <ui-map-marker=\"myMarker\"> will $watch 'myMarker' and each time it changes,\r\n   * it will hook up myMarker's events to the directive dom element.  Then\r\n   * ui-event will be able to catch all of myMarker's events. Super simple.\r\n   */\r\n  function mapOverlayDirective(directiveName, events) {\r\n    app.directive(directiveName, [function () {\r\n      return {\r\n        restrict: 'A',\r\n        link: function (scope, elm, attrs) {\r\n          scope.$watch(attrs[directiveName], function (newObject) {\r\n            if (newObject) {\r\n              bindMapEvents(scope, events, newObject, elm);\r\n            }\r\n          });\r\n        }\r\n      };\r\n    }]);\r\n  }\r\n\r\n  mapOverlayDirective('uiMapMarker',\r\n    'animation_changed click clickable_changed cursor_changed ' +\r\n      'dblclick drag dragend draggable_changed dragstart flat_changed icon_changed ' +\r\n      'mousedown mouseout mouseover mouseup position_changed rightclick ' +\r\n      'shadow_changed shape_changed title_changed visible_changed zindex_changed');\r\n\r\n  mapOverlayDirective('uiMapPolyline',\r\n    'click dblclick mousedown mousemove mouseout mouseover mouseup rightclick');\r\n\r\n  mapOverlayDirective('uiMapPolygon',\r\n    'click dblclick mousedown mousemove mouseout mouseover mouseup rightclick');\r\n\r\n  mapOverlayDirective('uiMapRectangle',\r\n    'bounds_changed click dblclick mousedown mousemove mouseout mouseover ' +\r\n      'mouseup rightclick');\r\n\r\n  mapOverlayDirective('uiMapCircle',\r\n    'center_changed click dblclick mousedown mousemove ' +\r\n      'mouseout mouseover mouseup radius_changed rightclick');\r\n\r\n  mapOverlayDirective('uiMapGroundOverlay',\r\n    'click dblclick');\r\n\r\n})();\r\n"]}