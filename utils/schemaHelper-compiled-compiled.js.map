{"version":3,"sources":["schemaHelper-compiled.js"],"names":[],"mappings":";;;AAGA,IAAI,IAAI,QAAQ,QAAR,CAAR;AACA,IAAI,WAAW,QAAQ,UAAR,CAAf,C;AACA,IAAI,SAAS,SAAS,MAAtB,C;AACA,IAAI,aAAa,UAAU,GAAV,EAAe;AAC5B,QAAI,SAAS,IAAI,MAAJ,CAAW,GAAX,CAAb;AACA,WAAO,OAAP,CAAe,UAAf,GAA4B,UAAU,MAAV,EAAkB;;AAE1C,eAAO,UAAU,IAAV,EAAgB,KAAK,MAArB,EAA6B,MAA7B,CAAP;AACH,KAHD;AAIA,WAAO,OAAP,CAAe,eAAf,GAAiC,UAAU,IAAV,EAAgB;AAC7C,eAAO,KAAK,OAAZ;AACA,eAAO,UAAU,IAAV,EAAgB,KAAK,IAArB,EAA2B,IAA3B,CAAP;AACH,KAHD;;AAKA,WAAO,OAAP,CAAe,SAAf,GAA2B,UAAU,EAAV,EAAc;AACrC,eAAO,UAAU,IAAV,EAAgB,KAAK,QAArB,EAA+B,EAA/B,CAAP;AACH,KAFD;;AAIA,WAAO,OAAP,CAAe,YAAf,GAA8B,UAAU,IAAV,EAAgB,IAAhB,EAAsB;AAChD,YAAI,CAAC,EAAE,GAAF,CAAM,MAAN,CAAL,EAAoB;AAChB,mBAAO,EAAE,QAAQ,IAAV,EAAP;AACH;AACD,eAAO,UAAU,IAAV,EAAgB,KAAK,MAArB,EAA6B,IAA7B,EAAmC,IAAnC,CAAP;AACH,KALD;;AAOA,WAAO,OAAP,CAAe,YAAf,GAA8B,UAAU,SAAV,EAAqB;AAC/C,eAAO,UAAU,IAAV,EAAgB,KAAK,MAArB,EAA6B,SAA7B,CAAP;AACH,KAFD;;;;AAMA,WAAO,MAAP;AACH,CA7BD;;AA+BA,IAAI,YAAY,UAAU,GAAV,EAAe,EAAf,EAAmB,GAAG,IAAtB,EAA4B;;AAExC,WAAO,IAAI,OAAJ,CAAY,UAAU,OAAV,EAAmB,GAAnB,EAAwB;;AAEvC,aAAK,IAAL,CAAU,UAAU,GAAV,EAAe,IAAf,EAAqB;;AAE3B,oBAAQ,IAAR;AACH,SAHD;AAIA,WAAG,KAAH,CAAS,GAAT,EAAc,IAAd;AACH,KAPM,CAAP;AAQH,CAVD;;AAYA,OAAO,OAAP,GAAiB;AACb,gBAAY,UADC;AAEb,WAAO,UAAU,SAAV,EAAqB,MAArB,EAA6B;AAChC,eAAO,SAAS,KAAT,CAAe,SAAf,EAA0B,MAA1B,CAAP;AACH;AAJY,CAAjB","file":"schemaHelper-compiled-compiled.js","sourcesContent":["/**\n * Created by dapaer on 16/7/24.\n */\nvar _ = require('lodash');\nvar mongoose = require(\"mongoose\"); //\t顶会议用户组件\nvar Schema = mongoose.Schema; //\t创建模型\nvar initSchema = function (obj) {\n    var schema = new Schema(obj);\n    schema.statics.saveEntity = function (entity) {\n        //console.log(\"you call save\",entity,this.create)\n        return executeFn(this, this.create, entity);\n    };\n    schema.statics.findByCondition = function (qObj) {\n        delete qObj.pageObj;\n        return executeFn(this, this.find, qObj);\n    };\n\n    schema.statics.queryById = function (id) {\n        return executeFn(this, this.findById, id);\n    };\n\n    schema.statics.updateEntity = function (qObj, sObj) {\n        if (!_.has('$set')) {\n            sObj = { '$set': sObj };\n        }\n        return executeFn(this, this.update, qObj, sObj);\n    };\n\n    schema.statics.deleteEntity = function (condition) {\n        return executeFn(this, this.remove, condition);\n    };\n    /*  shcema.statics.findOne=function(entity){\n          return executeFn(this,this.findOne,entity);\n      }*/\n    return schema;\n};\n\nvar executeFn = function (obj, fn, ...args) {\n    // console.log('args',args,obj);\n    return new Promise(function (resolve, rej) {\n\n        args.push(function (err, data) {\n            //  console.log('args',args,err);\n            resolve(data);\n        });\n        fn.apply(obj, args);\n    });\n};\n\nmodule.exports = {\n    initSchema: initSchema,\n    model: function (tableName, schema) {\n        return mongoose.model(tableName, schema);\n    }\n};\n\n//# sourceMappingURL=schemaHelper-compiled.js.map"]}