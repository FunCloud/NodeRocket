{"version":3,"sources":["busService-compiled.js"],"names":[],"mappings":"AAAA,IAAI,MAAM,QAAQ,gBAAR,EAA0B,IAApC;AACA,IAAI,KAAK,QAAQ,IAAR,CAAT;AACA,IAAI,IAAI,QAAQ,QAAR,CAAR;AACA,IAAI,iBAAiB,QAAQ,kBAAR,CAArB;;AAEA,aAAa;;AAEZ,aAAY,UAAU,GAAV,EAAe,GAAf,EAAoB,KAApB,EAA2B;AACtC,MAAI,UAAU,IAAI,UAAJ,CAAe;AAC5B,YAAS,MAAM,OADa;AAE5B,WAAQ,MAAM,MAFc;AAG5B,SAAM,MAAM,IAHgB;AAI5B,SAAM,MAAM;AAJgB,GAAf,EAKX,IALW,CAKN,UAAU,IAAV,EAAgB;AACvB,OAAI,IAAJ,CAAS,OAAO,YAAP,CAAoB,IAApB,CAAT;AACA,GAPa,CAAd;AAQA,EAXW;AAYZ,QAAO,UAAU,GAAV,EAAe,GAAf,EAAoB,KAApB,EAA2B;AACjC,MAAI,eAAJ,CAAoB,KAApB,EAA2B,IAA3B,CAAgC,UAAU,IAAV,EAAgB;AAC/C,OAAI,IAAJ,CAAS,OAAO,YAAP,CAAoB,IAApB,CAAT;AACA,GAFD;AAGA,EAhBW;AAiBZ,eAAc,UAAU,GAAV,EAAe,GAAf,EAAoB,KAApB,EAA2B;AACxC,KAAG,aAAa;AACf,OAAI,UAAU,MAAM,IAAI,eAAJ,CAAoB,KAApB,CAApB;AACA,WAAQ,GAAR,CAAY,OAAZ;AACA,OAAI,QAAQ,EAAE,GAAF,CAAM,OAAN,EAAe,SAAf,CAAZ;AACA,OAAI,UAAU,MAAM,eAAe,UAAf,CAA0B,KAA1B,CAApB;AACA,WAAQ,GAAR,CAAY,OAAZ;AACA,WAAQ,OAAR,CAAgB,KAAK,EAAE,OAAF,GAAY,QAAQ,IAAR,CAAa,KAAK,EAAE,GAAF,IAAS,EAAE,OAA7B,IAAwC,QAAQ,IAAR,CAAa,KAAK,EAAE,GAAF,IAAS,EAAE,OAA7B,EAAsC,IAA9E,GAAqF,EAAtH;AACA,UAAO,OAAP;AACA,GARD,EAQG,IARH,CAQQ,UAAU,IAAV,EAAgB;AACvB,OAAI,IAAJ,CAAS,OAAO,YAAP,CAAoB,IAApB,CAAT;AACA,GAVD;AAWA,EA7BW;AA8BZ,iBAAgB,UAAU,GAAV,EAAe,GAAf,EAAoB,KAApB,EAA2B;AAC1C,MAAI,eAAJ,CAAoB,EAAE,SAAS,MAAM,OAAjB,EAApB,EAAgD,IAAhD,CAAqD,UAAU,IAAV,EAAgB;AACpE,OAAI,IAAJ,CAAS,OAAO,YAAP,CAAoB,IAApB,CAAT;AACA,GAFD;AAGA,EAlCW;AAmCZ,SAAQ,UAAU,GAAV,EAAe,GAAf,EAAoB,KAApB,EAA2B;AAClC,MAAI,YAAJ,CAAiB,EAAE,KAAK,MAAM,GAAb,EAAjB,EAAqC,IAArC,CAA0C,UAAU,IAAV,EAAgB;AACzD,OAAI,IAAJ,CAAS,OAAO,YAAP,CAAoB,IAApB,CAAT;AACA,GAFD;AAGA,EAvCW;AAwCZ,SAAQ,UAAU,GAAV,EAAe,GAAf,EAAoB,KAApB,EAA2B;AAClC,MAAI,YAAJ,CAAiB,EAAE,KAAK,MAAM,GAAb,EAAjB,EAAqC;AACpC,YAAS,MAAM,OADqB;AAEpC,WAAQ,MAAM,MAFsB;AAGpC,SAAM,MAAM;AAHwB,GAArC,EAIG,IAJH,CAIQ,UAAU,IAAV,EAAgB;AACvB,OAAI,IAAJ,CAAS,OAAO,YAAP,CAAoB,IAApB,CAAT;AACA,GAND;AAOA;AAhDW,CAAb;;AAmDA,OAAO,OAAP,GAAiB,UAAjB","file":"busService-compiled-compiled.js","sourcesContent":["var bus = require('../models/buss').buss;\nvar co = require('co');\nvar _ = require('lodash');\nvar busTypeService = require('./busTypeService');\n\nbusService = {\n\t//这里是保存实体\n\tsaveEntity: function (req, res, param) {\n\t\tvar result1 = bus.saveEntity({\n\t\t\tbusType: param.busType,\n\t\t\tsortNo: param.sortNo,\n\t\t\tlogo: param.logo,\n\t\t\tname: param.name\n\t\t}).then(function (data) {\n\t\t\tres.send(global.configResult(data));\n\t\t});\n\t},\n\tquery: function (req, res, param) {\n\t\tbus.findByCondition(param).then(function (data) {\n\t\t\tres.send(global.configResult(data));\n\t\t});\n\t},\n\tqueryAndType: function (req, res, param) {\n\t\tco(function* () {\n\t\t\tvar result1 = yield bus.findByCondition(param);\n\t\t\tconsole.log(result1);\n\t\t\tvar types = _.map(result1, 'busType');\n\t\t\tvar result2 = yield busTypeService.queryByIds(types);\n\t\t\tconsole.log(result2);\n\t\t\tresult1.forEach(x => x.busType = result2.find(y => y._id == x.busType) ? result2.find(y => y._id == x.busType).name : '');\n\t\t\treturn result1;\n\t\t}).then(function (data) {\n\t\t\tres.send(global.configResult(data));\n\t\t});\n\t},\n\tqueryByBusType: function (req, res, param) {\n\t\tbus.findByCondition({ busType: param.busType }).then(function (data) {\n\t\t\tres.send(global.configResult(data));\n\t\t});\n\t},\n\tdelete: function (req, res, param) {\n\t\tbus.deleteEntity({ _id: param._id }).then(function (data) {\n\t\t\tres.send(global.configResult(data));\n\t\t});\n\t},\n\tupdate: function (req, res, param) {\n\t\tbus.updateEntity({ _id: param._id }, {\n\t\t\tbusType: param.busType,\n\t\t\tsortNo: param.sortNo,\n\t\t\tlogo: param.logo\n\t\t}).then(function (data) {\n\t\t\tres.send(global.configResult(data));\n\t\t});\n\t}\n};\n\nmodule.exports = busService;\n\n//# sourceMappingURL=busService-compiled.js.map"]}