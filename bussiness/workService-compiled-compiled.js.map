{"version":3,"sources":["workService-compiled.js"],"names":[],"mappings":"AAAA,IAAI,KAAK,QAAQ,IAAR,CAAT;AACA,IAAI,QAAQ,QAAQ,iBAAR,EAA2B,KAAvC;AACA,IAAI,kBAAkB,QAAQ,mBAAR,CAAtB;AACA,IAAI,IAAI,QAAQ,QAAR,CAAR;AACA,eAAe;;AAEd,aAAY,UAAU,GAAV,EAAe,GAAf,EAAoB,KAApB,EAA2B;AACtC,MAAI,UAAU,MAAM,UAAN,CAAiB;AAC9B,aAAU,MAAM,QADc;AAE9B,WAAQ,MAAM,MAFgB;AAG9B,aAAU,MAAM,QAHc;AAI9B,UAAO,MAAM,KAJiB;AAK9B,WAAQ,MAAM,MALgB;AAM9B,YAAS,MAAM,OANe;AAO9B,SAAM,MAAM;AAPkB,GAAjB,EAQX,IARW,CAQN,UAAU,IAAV,EAAgB;AACvB,OAAI,IAAJ,CAAS,OAAO,YAAP,CAAoB,IAApB,CAAT;AACA,GAVa,CAAd;AAWA,EAda;AAed,QAAO,UAAU,GAAV,EAAe,GAAf,EAAoB,KAApB,EAA2B;AACjC,QAAM,eAAN,CAAsB,KAAtB,EAA6B,IAA7B,CAAkC,UAAU,IAAV,EAAgB;AACjD,OAAI,IAAJ,CAAS,OAAO,YAAP,CAAoB,IAApB,CAAT;AACA,GAFD;AAGA,EAnBa;AAoBd,eAAc,UAAU,GAAV,EAAe,GAAf,EAAoB,KAApB,EAA2B;AACxC,KAAG,aAAa;AACf,OAAI,UAAU,MAAM,MAAM,eAAN,CAAsB,KAAtB,CAApB;AACA,OAAI,QAAQ,EAAE,GAAF,CAAM,OAAN,EAAe,UAAf,CAAZ;AACA,OAAI,UAAU,MAAM,gBAAgB,UAAhB,CAA2B,KAA3B,CAApB;AACA,WAAQ,OAAR,CAAgB,KAAK,EAAE,QAAF,GAAa,QAAQ,IAAR,CAAa,KAAK,EAAE,GAAF,IAAS,EAAE,QAA7B,IAAyC,QAAQ,IAAR,CAAa,KAAK,EAAE,GAAF,IAAS,EAAE,QAA7B,EAAuC,IAAhF,GAAuF,EAAzH;AACA,UAAO,OAAP;AACA,GAND,EAMG,IANH,CAMQ,UAAU,IAAV,EAAgB;AACvB,OAAI,IAAJ,CAAS,OAAO,YAAP,CAAoB,IAApB,CAAT;AACA,GARD;AASA,EA9Ba;AA+Bd,SAAQ,UAAU,GAAV,EAAe,GAAf,EAAoB,KAApB,EAA2B;AAClC,QAAM,YAAN,CAAmB,EAAE,KAAK,MAAM,GAAb,EAAnB,EAAuC,IAAvC,CAA4C,UAAU,IAAV,EAAgB;AAC3D,OAAI,IAAJ,CAAS,OAAO,YAAP,CAAoB,IAApB,CAAT;AACA,GAFD;AAGA,EAnCa;AAoCd,SAAQ,UAAU,GAAV,EAAe,GAAf,EAAoB,KAApB,EAA2B;AAClC,QAAM,YAAN,CAAmB,EAAE,KAAK,MAAM,GAAb,EAAnB,EAAuC;AACtC,aAAU,MAAM,QADsB;AAEtC,WAAQ,MAAM,MAFwB;AAGtC,aAAU,MAAM,QAHsB;AAItC,UAAO,MAAM,KAJyB;AAKtC,WAAQ,MAAM,MALwB;AAMtC,YAAS,MAAM,OANuB;AAOtC,SAAM,MAAM;AAP0B,GAAvC,EAQG,IARH,CAQQ,UAAU,IAAV,EAAgB;AACvB,OAAI,IAAJ,CAAS,OAAO,YAAP,CAAoB,IAApB,CAAT;AACA,GAVD;AAWA;AAhDa,CAAf;;AAmDA,OAAO,OAAP,GAAiB,YAAjB","file":"workService-compiled-compiled.js","sourcesContent":["var co = require('co');\nvar works = require('../models/works').works;\nvar workTypeService = require('./workTypeService');\nvar _ = require('lodash');\nworksService = {\n\t//这里是保存实体\n\tsaveEntity: function (req, res, param) {\n\t\tvar result1 = works.saveEntity({\n\t\t\tworkType: param.workType,\n\t\t\tsortNo: param.sortNo,\n\t\t\tloadTime: param.loadTime,\n\t\t\ttitle: param.title,\n\t\t\tperson: param.person,\n\t\t\tcontent: param.content,\n\t\t\tlogo: param.logo\n\t\t}).then(function (data) {\n\t\t\tres.send(global.configResult(data));\n\t\t});\n\t},\n\tquery: function (req, res, param) {\n\t\tworks.findByCondition(param).then(function (data) {\n\t\t\tres.send(global.configResult(data));\n\t\t});\n\t},\n\tqueryAndType: function (req, res, param) {\n\t\tco(function* () {\n\t\t\tvar result1 = yield works.findByCondition(param);\n\t\t\tvar types = _.map(result1, 'workType');\n\t\t\tvar result2 = yield workTypeService.queryByIds(types);\n\t\t\tresult1.forEach(x => x.workType = result2.find(y => y._id == x.workType) ? result2.find(y => y._id == x.workType).name : '');\n\t\t\treturn result1;\n\t\t}).then(function (data) {\n\t\t\tres.send(global.configResult(data));\n\t\t});\n\t},\n\tdelete: function (req, res, param) {\n\t\tworks.deleteEntity({ _id: param._id }).then(function (data) {\n\t\t\tres.send(global.configResult(data));\n\t\t});\n\t},\n\tupdate: function (req, res, param) {\n\t\tworks.updateEntity({ _id: param._id }, {\n\t\t\tworkType: param.workType,\n\t\t\tsortNo: param.sortNo,\n\t\t\tloadTime: param.loadTime,\n\t\t\ttitle: param.title,\n\t\t\tperson: param.person,\n\t\t\tcontent: param.content,\n\t\t\tlogo: param.logo\n\t\t}).then(function (data) {\n\t\t\tres.send(global.configResult(data));\n\t\t});\n\t}\n};\n\nmodule.exports = worksService;\n\n//# sourceMappingURL=workService-compiled.js.map"]}